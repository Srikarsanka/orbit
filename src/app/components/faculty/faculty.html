<div class="dashboard-container">
      <!-- SIDEBAR -->
      <aside class="sidebar">
            <h2 class="brand">
                  <span class="brand-highlight">O</span>rbit
            </h2>
            <nav class="menu">
                  <a class="menu-item" (click)="selectone('dashboard')"
                        [ngClass]="{ active: selectedSection === 'dashboard' }">
                        <i class="fa-solid fa-chart-line"></i> Dashboard
                  </a>

                  <a class="menu-item" (click)="selectone('myclasses')"
                        [ngClass]="{ active: selectedSection === 'myclasses' }">
                        <i class="fa-solid fa-graduation-cap"></i> My Classes
                  </a>

                  <a class="menu-item" (click)="selectone('createclass')"
                        [ngClass]="{ active: selectedSection === 'createclass' }">
                        <i class="fa-solid fa-circle-plus"></i> Create Class
                  </a>

                  <a class="menu-item" (click)="selectone('anouncements')"
                        [ngClass]="{ active: selectedSection === 'anouncements' }">
                        <i class="fa-solid fa-bullhorn"></i> Announcements
                  </a>

                  <a class="menu-item" (click)="selectone('material')"
                        [ngClass]="{ active: selectedSection === 'material' }">
                        <i class="fa-solid fa-folder-open"></i> Materials Upload
                  </a>

                  <a class="menu-item" (click)="selectone('profile')"
                        [ngClass]="{ active: selectedSection === 'profile' }">
                        <i class="fa-solid fa-user"></i> Profile
                  </a>

                  <a class="menu-item logout">
                        <i class="fa-solid fa-right-from-bracket"></i> Logout
                  </a>
            </nav>
      </aside>

      <!-- MAIN AREA -->
      <main class="main">
            <!-- TOP BAR -->
            <header class="topbar">
                  <div></div>
                  <div class="profile-box">
                        <img [src]="photourl" class="profile-img" />
                        <div class="profile-info">
                              <h4>{{name}}</h4>
                              <p>{{role}}</p>
                        </div>
                  </div>
            </header>

            <div id="content">
                  <!-- DASHBOARD SECTION -->
                  <section [hidden]="selectedSection !== 'dashboard'" class="dashboard">
                        <div class="dashboard-header">
                              <h1 class="section-title">Welcome back, {{ name }}</h1>
                              <p>Here's your teaching overview</p>
                        </div>

                        <!-- Stats Cards -->
                        <div class="stats-grid">
                              <div class="stat-card">
                                    <div class="stat-icon">
                                          <i class="fas fa-chalkboard-teacher"></i>
                                    </div>
                                    <div class="stat-info">
                                          <h3>{{ totalclasses || 0 }}</h3>
                                          <p>Active Classes</p>
                                    </div>
                              </div>

                              <div class="stat-card">
                                    <div class="stat-icon">
                                          <i class="fas fa-users"></i>
                                    </div>
                                    <div class="stat-info">
                                          <h3>{{ 0 }}</h3>
                                          <p>Total Students</p>
                                    </div>
                              </div>

                              <div class="stat-card">
                                    <div class="stat-icon">
                                          <i class="fas fa-bullhorn"></i>
                                    </div>
                                    <div class="stat-info">
                                          <h3>{{ 0 || announcementsCount}}</h3>
                                          <p>Announcements</p>
                                    </div>
                              </div>

                              <div class="stat-card">
                                    <div class="stat-icon">
                                          <i class="fas fa-file-alt"></i>
                                    </div>
                                    <div class="stat-info">
                                          <h3>{{ totalMaterialsCount }}</h3>
                                          <p>Materials</p>
                                    </div>
                              </div>
                        </div>

                        <!-- Main Content Area -->
                        <div class="dashboard-content">
                              <div class="content-section">
                                    <div class="section-header">
                                          <h3>Recent Classes</h3>
                                          <button class="view-all-btn" (click)="selectone('myclasses')">View
                                                All</button>
                                    </div>
                                    <div class="recent-classes">
                                          <div *ngFor="let class of recentClasses" class="class-item">
                                                <div class="class-info">
                                                      <h4>{{ class.className }}</h4>
                                                      <p>{{ class.subject }}</p>
                                                </div>
                                                <div class="class-stats">
                                                      <span>{{ class.studentsCount || 0 }} students</span>
                                                </div>
                                          </div>
                                          <div *ngIf="recentClasses.length === 0" class="empty-state">
                                                <p>No classes yet. <a (click)="selectone('createclass')">Create your
                                                            first class</a></p>
                                          </div>
                                    </div>
                              </div>

                              <div class="content-section">
                                    <div class="section-header">
                                          <h3>Quick Actions</h3>
                                    </div>
                                    <div class="quick-actions">
                                          <button class="action-btn" (click)="selectone('createclass')">
                                                <i class="fas fa-plus-circle"></i>
                                                <span>Create Class</span>
                                          </button>
                                          <button class="action-btn" (click)="selectone('anouncements')">
                                                <i class="fas fa-bullhorn"></i>
                                                <span>New Announcement</span>
                                          </button>
                                          <button class="action-btn" (click)="selectone('material')">
                                                <i class="fas fa-file-upload"></i>
                                                <span>Upload Material</span>
                                          </button>
                                    </div>
                              </div>
                        </div>
                  </section>

                  <!-- MY CLASSES SECTION -->
                  <section [hidden]="selectedSection !== 'myclasses'" class="myclasses-section">
                        <div class="section-header">
                              <h1 class="section-title">My Classes</h1>
                              <br>
                              <p style="text-align: left;">Organize, Manage, and Explore Your Teaching Space</p>
                        </div>

                        <!-- Empty State with Animation -->
                        <div *ngIf="myClasses.length === 0" class="empty-state">
                              <div class="empty-animation">
                                    <div class="emoji-container">
                                          <div class="sad-emoji">ðŸ˜”</div>
                                          <div class="tear"></div>
                                    </div>
                                    <div class="floating-books">
                                          <div class="book book-1">ðŸ“š</div>
                                          <div class="book book-2">ðŸ“–</div>
                                          <div class="book book-3">ðŸŽ“</div>
                                    </div>
                              </div>
                              <div class="empty-text">
                                    <h3>No Classes Yet</h3>
                                    <p>Create your first class to start your teaching journey</p>
                                    <button class="btn-create-first" (click)="selectone('createclass')">
                                          Create Your First Class
                                    </button>
                              </div>
                        </div>

                        <!-- Classes Grid -->
                        <div *ngIf="myClasses.length > 0" class="class-grid">
                              <div class="class-card" *ngFor="let c of myClasses; let i = index"
                                    [style.animation-delay]="i * 0.1 + 's'">
                                    <!-- Gradient Background -->
                                    <div class="card-gradient" [ngClass]="'gradient-' + (i % 4)"></div>

                                    <!-- Animated Background Pattern -->
                                    <div class="card-pattern"></div>

                                    <!-- Content -->
                                    <div class="class-content">
                                          <div class="class-header">
                                                <h2>{{ c.className }}</h2>
                                                <div class="subject-badge">{{ c.subject }}</div>
                                          </div>

                                          <div class="class-stats">
                                                <div class="stat">
                                                      <span class="stat-icon">ðŸ‘¥</span>
                                                      <span class="stat-text">{{ c.studentsCount || 0 }} Students</span>
                                                </div>
                                                <div class="stat">
                                                      <span class="stat-icon">ðŸ“…</span>
                                                      <span class="stat-text">{{ c.createdDate | date:'MMM d' }}</span>
                                                </div>
                                          </div>

                                          <div class="code-section">
                                                <div class="code-label">Class Code</div>
                                                <div class="code-value">
                                                      {{ c.classCode }}
                                                      <button class="btn-copy" (click)="copyCodeModern(c.classCode)">
                                                            <span class="copy-text">Copy</span>
                                                            <span class="copied-text">Copied!</span>
                                                      </button>
                                                </div>
                                          </div>

                                          <button class="btn-open-class" (click)="openclass(c.classCode)">
                                                <span>Open Class</span>
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                                      <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                </svg>
                                          </button>
                                    </div>
                              </div>

                              <!-- Add New Class Card -->
                              <div class="class-card add-new-card" (click)="selectone('createclass')">
                                    <div class="add-new-content">
                                          <div class="add-icon">
                                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                                                      <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2"
                                                            stroke-linecap="round" stroke-linejoin="round" />
                                                </svg>
                                          </div>
                                          <h3>Create New Class</h3>
                                          <p>Start a new teaching journey</p>
                                    </div>
                              </div>
                        </div>
                  </section>

                  <!-- CREATE CLASS SECTION -->
                  <section [hidden]="selectedSection !== 'createclass'" class="create-section">
                        <div class="create-header">
                              <h1 class="section-title">Create New Class</h1>
                              <p>Set up your class details and start inviting students</p>
                        </div>

                        <div class="create-container">
                              <!-- FORM SECTION -->
                              <div class="form-section">
                                    <form [formGroup]="form" (ngSubmit)="createClass()" class="create-form">
                                          <div class="form-group">
                                                <label for="className">Class Name <span>*</span></label>
                                                <div class="input-wrapper">
                                                      <input id="className" formControlName="className"
                                                            placeholder="e.g. Web Technologies - A" type="text" />
                                                      <div class="input-icon">
                                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                                  xmlns="http://www.w3.org/2000/svg">
                                                                  <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z"
                                                                        fill="#8A94A6" />
                                                                  <path d="M12 6C9.79 6 8 7.79 8 10C8 12.21 9.79 14 12 14C14.21 14 16 12.21 16 10C16 7.79 14.21 6 12 6ZM12 12C10.9 12 10 11.1 10 10C10 8.9 10.9 8 12 8C13.1 8 14 8.9 14 10C14 11.1 13.1 12 12 12Z"
                                                                        fill="#8A94A6" />
                                                                  <path d="M12 16C8.67 16 6 17.34 6 19V20H18V19C18 17.34 15.33 16 12 16Z"
                                                                        fill="#8A94A6" />
                                                            </svg>
                                                      </div>
                                                </div>
                                          </div>

                                          <div class="form-group">
                                                <label for="subject">Subject <span>*</span></label>
                                                <div class="input-wrapper">
                                                      <input id="subject" formControlName="subject"
                                                            placeholder="e.g. Full Stack Web Development" type="text" />
                                                      <div class="input-icon">
                                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                                  xmlns="http://www.w3.org/2000/svg">
                                                                  <path d="M12 2L1 7L12 12L23 7L12 2Z" stroke="#8A94A6"
                                                                        stroke-width="2" stroke-linecap="round"
                                                                        stroke-linejoin="round" />
                                                                  <path d="M1 17L12 22L23 17" stroke="#8A94A6"
                                                                        stroke-width="2" stroke-linecap="round"
                                                                        stroke-linejoin="round" />
                                                                  <path d="M1 12L12 17L23 12" stroke="#8A94A6"
                                                                        stroke-width="2" stroke-linecap="round"
                                                                        stroke-linejoin="round" />
                                                            </svg>
                                                      </div>
                                                </div>
                                          </div>

                                          <div class="form-group">
                                                <label for="description">Description</label>
                                                <div class="input-wrapper">
                                                      <textarea id="description" formControlName="description"
                                                            placeholder="Short description of your class (optional)"
                                                            rows="4"></textarea>
                                                      <div class="input-icon textarea-icon">
                                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                                  xmlns="http://www.w3.org/2000/svg">
                                                                  <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z"
                                                                        stroke="#8A94A6" stroke-width="2"
                                                                        stroke-linecap="round"
                                                                        stroke-linejoin="round" />
                                                                  <path d="M14 2V8H20" stroke="#8A94A6" stroke-width="2"
                                                                        stroke-linecap="round"
                                                                        stroke-linejoin="round" />
                                                                  <path d="M16 13H8" stroke="#8A94A6" stroke-width="2"
                                                                        stroke-linecap="round"
                                                                        stroke-linejoin="round" />
                                                                  <path d="M16 17H8" stroke="#8A94A6" stroke-width="2"
                                                                        stroke-linecap="round"
                                                                        stroke-linejoin="round" />
                                                                  <path d="M10 9H9H8" stroke="#8A94A6" stroke-width="2"
                                                                        stroke-linecap="round"
                                                                        stroke-linejoin="round" />
                                                            </svg>
                                                      </div>
                                                </div>
                                          </div>

                                          <button class="btn-create" type="submit" [disabled]="submitting">
                                                <span *ngIf="!submitting">Create Class</span>
                                                <span *ngIf="submitting" class="loading">
                                                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M12 2V6" stroke="white" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round" />
                                                            <path d="M12 18V22" stroke="white" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round" />
                                                            <path d="M4.93 4.93L7.76 7.76" stroke="white"
                                                                  stroke-width="2" stroke-linecap="round"
                                                                  stroke-linejoin="round" />
                                                            <path d="M16.24 16.24L19.07 19.07" stroke="white"
                                                                  stroke-width="2" stroke-linecap="round"
                                                                  stroke-linejoin="round" />
                                                            <path d="M2 12H6" stroke="white" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round" />
                                                            <path d="M18 12H22" stroke="white" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round" />
                                                            <path d="M4.93 19.07L7.76 16.24" stroke="white"
                                                                  stroke-width="2" stroke-linecap="round"
                                                                  stroke-linejoin="round" />
                                                            <path d="M16.24 7.76L19.07 4.93" stroke="white"
                                                                  stroke-width="2" stroke-linecap="round"
                                                                  stroke-linejoin="round" />
                                                      </svg>
                                                      Creating...
                                                </span>
                                          </button>

                                          <div class="form-messages">
                                                <p class="success" *ngIf="successMessage">{{ successMessage }}</p>
                                                <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>
                                          </div>

                                          <div class="created-box" *ngIf="createdClass">
                                                <div class="success-header">
                                                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999"
                                                                  stroke="#10B981" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round" />
                                                            <path d="M22 4L12 14.01L9 11.01" stroke="#10B981"
                                                                  stroke-width="2" stroke-linecap="round"
                                                                  stroke-linejoin="round" />
                                                      </svg>
                                                      <h3>Class Created Successfully!</h3>
                                                </div>
                                                <div class="success-details">
                                                      <div class="detail-item">
                                                            <span class="label">Class Name:</span>
                                                            <span class="value">{{ createdClass.className }}</span>
                                                      </div>
                                                      <div class="detail-item">
                                                            <span class="label">Subject:</span>
                                                            <span class="value">{{ createdClass.subject }}</span>
                                                      </div>
                                                      <div class="detail-item">
                                                            <span class="label">Class Code:</span>
                                                            <span class="value code">{{ createdClass.classCode }}</span>
                                                      </div>
                                                </div>
                                                <div class="success-actions">
                                                      <button class="btn-secondary">Copy Class Code</button>
                                                      <button class="btn-primary">Go to Class</button>
                                                </div>
                                          </div>
                                    </form>
                              </div>

                              <!-- ILLUSTRATION SECTION -->
                              <div class="illustration-section">
                                    <div class="illustration-card">
                                          <div class="card-header">
                                                <h3>Create Engaging Classes</h3>
                                                <p>Set up your virtual classroom in minutes</p>
                                          </div>
                                          <div class="illustration">
                                                <img src="https://res.cloudinary.com/dnevq4wek/image/upload/v1763960117/42112f5b-0f1f-46ce-afe6-81e840737c8d-removebg-preview_y1jlpz.png"
                                                      alt="Classroom Illustration" />
                                          </div>
                                          <div class="card-features">
                                                <div class="feature">
                                                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999"
                                                                  stroke="#10B981" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round" />
                                                            <path d="M22 4L12 14.01L9 11.01" stroke="#10B981"
                                                                  stroke-width="2" stroke-linecap="round"
                                                                  stroke-linejoin="round" />
                                                      </svg>
                                                      <span>Share class code with students</span>
                                                </div>
                                                <div class="feature">
                                                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999"
                                                                  stroke="#10B981" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round" />
                                                            <path d="M22 4L12 14.01L9 11.01" stroke="#10B981"
                                                                  stroke-width="2" stroke-linecap="round"
                                                                  stroke-linejoin="round" />
                                                      </svg>
                                                      <span>Upload materials and resources</span>
                                                </div>
                                                <div class="feature">
                                                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999"
                                                                  stroke="#10B981" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round" />
                                                            <path d="M22 4L12 14.01L9 11.01" stroke="#10B981"
                                                                  stroke-width="2" stroke-linecap="round"
                                                                  stroke-linejoin="round" />
                                                      </svg>
                                                      <span>Make announcements and updates</span>
                                                </div>
                                          </div>
                                    </div>
                              </div>
                        </div>
                  </section>

                  <!-- ANNOUNCEMENTS SECTION -->
                  <!-- ANNOUNCEMENTS SECTION -->
                  <section [hidden]="selectedSection !== 'anouncements'" class="announcements-section">
                        <div class="announcements-header">
                              <h1 class="section-title">Announcements</h1>
                              <p class="section-sub">Share important updates with your students</p>
                        </div>

                        <div class="announcements-container">
                              <!-- Create Announcement Form -->
                              <div class="create-announcement-card">
                                    <div class="card-header">
                                          <h3>Create New Announcement</h3>
                                          <p>Send messages to your class through the platform or email</p>
                                    </div>

                                    <form [formGroup]="announcementForm" (ngSubmit)="sendAnnouncement()"
                                          class="announcement-form">
                                          <!-- Class Selection -->
                                          <div class="form-group">
                                                <label for="selectedClass">Select Class <span>*</span></label>
                                                <div class="input-wrapper">
                                                      <select id="selectedClass" formControlName="selectedClass"
                                                            class="form-select">
                                                            <option value="">Choose a class</option>
                                                            <option *ngFor="let class of myClasses" [value]="class._id">

                                                                  {{ class.className }} - {{ class.subject }}
                                                            </option>
                                                      </select>
                                                      <div class="input-icon">
                                                            <i class="fas fa-chalkboard-teacher" class="mr-4"></i>
                                                      </div>
                                                </div>
                                          </div>

                                          <!-- Announcement Title -->
                                          <div class="form-group">
                                                <label for="announcementTitle">Title <span>*</span></label>
                                                <div class="input-wrapper">
                                                      <input id="announcementTitle" formControlName="title"
                                                            placeholder="Enter announcement title  Title must be at least 5 characters"
                                                            type="text" />
                                                      <div class="input-icon">
                                                            <i class="fas fa-heading"></i>
                                                      </div>
                                                </div>
                                          </div>

                                          <!-- Announcement Message -->
                                          <div class="form-group">
                                                <label for="announcementMessage">Message <span>*</span></label>
                                                <div class="input-wrapper">
                                                      <textarea id="announcementMessage" formControlName="message"
                                                            placeholder="Write your announcement message here and message length should be more than 5 words"
                                                            rows="5"></textarea>
                                                      <div class="input-icon textarea-icon">
                                                            <i class="fas fa-comment-dots"></i>
                                                      </div>
                                                </div>
                                          </div>

                                          <!-- Delivery Options -->
                                          <div class="form-group">
                                                <label class="checkbox-label">
                                                      <input type="checkbox" formControlName="sendEmail" />
                                                      <span class="checkmark"></span>
                                                      Also send via email to all students
                                                </label>
                                                <small class="hint">Students will receive this announcement in their
                                                      email inbox</small>
                                          </div>

                                          <!-- Action Buttons -->
                                          <div class="form-actions">
                                                <button type="button" class="btn-secondary" (click)="clearForm()">
                                                      Clear
                                                </button>
                                                <button type="submit" class="btn-primary"
                                                      [disabled]="!announcementForm.valid || sending">
                                                      <span *ngIf="!sending">Send Announcement</span>
                                                      <span *ngIf="sending" class="loading">
                                                            <i class="fas fa-spinner"></i> Sending...
                                                      </span>
                                                </button>
                                          </div>

                                          <!-- Form Messages -->
                                          <div class="form-messages">
                                                <p class="success" *ngIf="successMessage">{{ successMessage }}</p>
                                                <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>
                                          </div>
                                    </form>
                              </div>

                              <!-- Recent Announcements -->
                              <div class="recent-announcements">
                                    <div class="section-header">
                                          <h3>Recent Announcements</h3>
                                          <span class="badge">{{ recentAnnouncements.length }}</span>
                                    </div>

                                    <div class="announcements-list">
                                          <div *ngFor="let announcement of recentAnnouncements"
                                                class="announcement-item">
                                                <div class="announcement-header">
                                                      <div class="announcement-info">
                                                            <h4>{{ announcement.title }}</h4>
                                                            <div class="meta">
                                                                  <span class="class-name">{{
                                                                        getClassName(announcement.classId) }}</span>
                                                                  <span class="dot">â€¢</span>
                                                                  <span class="date">{{ announcement.createdAt |
                                                                        date:'MMM d, yyyy' }}</span>
                                                                  <span class="dot">â€¢</span>
                                                                  <span class="delivery-method">
                                                                        <i class="fas"
                                                                              [class.fa-envelope]="announcement.sendEmail"
                                                                              [class.fa-bullhorn]="!announcement.sendEmail"></i>
                                                                        {{ announcement.sendEmail ? 'Email & Platform' :
                                                                        'Platform Only' }}
                                                                  </span>
                                                            </div>
                                                      </div>
                                                      <div class="announcement-actions">
                                                            <button class="btn-icon"
                                                                  (click)="viewAnnouncement(announcement)">
                                                                  <i class="fas fa-eye"></i>
                                                            </button>
                                                            <button class="btn-icon"
                                                                  (click)="resendAnnouncement(announcement)">
                                                                  <i class="fas fa-redo"></i>
                                                            </button>
                                                      </div>
                                                </div>
                                                <p class="announcement-preview">{{ announcement.message | truncate:120
                                                      }}</p>
                                          </div>

                                          <!-- Empty State -->
                                          <div *ngIf="recentAnnouncements.length === 0" class="empty-state">
                                                <div class="empty-icon">
                                                      <i class="fas fa-bullhorn"></i>
                                                </div>
                                                <h4>No Announcements Yet</h4>
                                                <p>Create your first announcement to share with your students</p>
                                          </div>
                                    </div>
                              </div>
                        </div>
                  </section>

                  <!-- MATERIALS UPLOAD SECTION -->
                  <!-- MATERIALS UPLOAD SECTION -->
                  <section [hidden]="selectedSection !== 'material'" class="materials-section">
                        <div class="section-header">
                              <h1 class="section-title">Materials Upload</h1>
                              <p class="section-sub">Upload and organize your teaching materials</p>
                        </div>

                        <div class="materials-container">
                              <!-- Upload Card -->
                              <div class="upload-card">
                                    <div class="upload-header">
                                          <div class="upload-icon">
                                                <i class="fa-solid fa-cloud-arrow-up"></i>
                                          </div>
                                          <div class="upload-info">
                                                <h3>Upload New Material</h3>
                                                <p>Drag and drop files or click to browse</p>
                                          </div>
                                    </div>

                                    <!-- FIXED: Added drag & drop event bindings -->
                                    <div class="upload-area" (click)="fileInput.click()" (dragover)="onDragOver($event)"
                                          (dragleave)="onDragLeave($event)" (drop)="onDrop($event)">
                                          <input type="file" #fileInput hidden (change)="onFileSelect($event)" multiple>
                                          <div class="upload-content">
                                                <i class="fa-solid fa-file-arrow-up"></i>
                                                <h4>Select files to upload</h4>
                                                <p>Supports PDF, DOC, PPT, ZIP, Images, and more</p>
                                                <span class="file-size">Max file size: 50MB</span>
                                          </div>
                                    </div>

                                    <div class="upload-actions">
                                          <div class="form-group">
                                                <label for="classSelect">Assign to Class</label>
                                                <select id="classSelect" class="form-select" #classSelect>
                                                      <option value="">All Classes</option>
                                                      <option *ngFor="let class of myClasses" [value]="class._id">
                                                            {{ class.className }} - {{ class.subject }}
                                                      </option>
                                                </select>
                                          </div>

                                          <div class="form-group">
                                                <label for="materialTitle">Material Title</label>
                                                <input id="materialTitle" type="text" placeholder="Enter material title"
                                                      #materialTitle>
                                          </div>

                                          <div class="action-buttons">
                                                <button class="btn-secondary" (click)="cancelUpload()">Cancel</button>
                                                <!-- FIXED: Added click handler -->
                                                <button class="btn-primary" [disabled]="!selectedFiles.length"
                                                      (click)="uploadMaterials()">
                                                      <i class="fa-solid fa-upload"></i>
                                                      Upload Materials
                                                </button>
                                          </div>
                                    </div>
                              </div>

                              <!-- Upload Progress -->
                              <div *ngIf="uploading" class="upload-progress">
                                    <h4>Uploading Files ({{ uploadProgress | number:'1.0-0' }}%)</h4>
                                    <div class="progress-list">
                                          <div *ngFor="let file of selectedFiles" class="progress-item">
                                                <div class="file-info">
                                                      <i class="fa-solid fa-file"></i>
                                                      <span class="file-name">{{ file.name }}</span>
                                                      <span class="file-size">({{ formatFileSize(file.size) }})</span>
                                                </div>
                                                <div class="progress-bar">
                                                      <div class="progress-fill" [style.width]="file.progress + '%'">
                                                      </div>
                                                </div>
                                                <span class="progress-text">{{ file.progress }}%</span>
                                          </div>
                                    </div>
                                    <button class="btn-secondary btn-sm" (click)="cancelUpload()"
                                          [disabled]="uploadProgress === 100">
                                          Cancel Upload
                                    </button>
                              </div>

                              <!-- Materials Grid -->
                              <div class="materials-grid" *ngIf="materials.length > 0">
                                    <div class="grid-header">
                                          <h3>Your Materials ({{ materials.length }})</h3>
                                          <div class="filter-options">
                                                <select class="filter-select" #classFilter
                                                      (change)="onClassFilterChange(classFilter.value)">
                                                      <option value="">All Classes</option>
                                                      <option *ngFor="let class of myClasses" [value]="class._id">
                                                            {{ class.className }}
                                                      </option>
                                                </select>
                                                <div class="search-box">
                                                      <i class="fa-solid fa-search"></i>
                                                      <input type="text" placeholder="Search materials..." #searchInput
                                                            (input)="onSearchMaterials(searchInput.value)">
                                                </div>
                                          </div>
                                    </div>

                                    <div class="materials-list">
                                          <div *ngFor="let material of filteredMaterials" class="material-card">
                                                <div class="material-icon">
                                                      <i [class]="getFileIcon(material.type)"></i>
                                                </div>
                                                <div class="material-info">
                                                      <h4>{{ material.title }}</h4>
                                                      <p class="material-meta">
                                                            <span class="file-type">{{ material.type }}</span>
                                                            <span class="file-size">{{ formatFileSize(material.size)
                                                                  }}</span>
                                                            <span class="upload-date">{{ material.date }}</span>
                                                      </p>
                                                      <div class="material-classes">
                                                            <span class="class-tag"
                                                                  *ngFor="let class of material.assignedClasses">
                                                                  {{ class }}
                                                            </span>
                                                      </div>
                                                </div>
                                                <div class="material-actions">
                                                      <button class="btn-icon" title="Download"
                                                            (click)="downloadMaterial(material)">
                                                            <i class="fa-solid fa-download"></i>
                                                      </button>
                                                      <button class="btn-icon" title="Share"
                                                            (click)="shareMaterial(material)">
                                                            <i class="fa-solid fa-share"></i>
                                                      </button>
                                                      <button class="btn-icon btn-danger" title="Delete"
                                                            (click)="deleteMaterial(material)">
                                                            <i class="fa-solid fa-trash"></i>
                                                      </button>
                                                </div>
                                          </div>
                                    </div>
                              </div>

                              <!-- Empty State -->
                              <div *ngIf="materials.length === 0 && !uploading" class="empty-state">
                                    <i class="fa-solid fa-folder-open"></i>
                                    <h4>No materials uploaded yet</h4>
                                    <p>Upload your first teaching material to get started</p>
                              </div>
                        </div>
                  </section>
                  <!-- PROFILE SECTION -->
                  <section [hidden]="selectedSection !== 'profile'" class="profile-section">
                        <div class="profile-header">
                              <h1 class="section-title">Profile Settings</h1>
                              <p>Manage your account information and preferences</p>
                        </div>

                        <div class="profile-container">
                              <!-- Profile Information Card -->
                              <div class="profile-card">
                                    <div class="card-header">
                                          <h3>Personal Information</h3>
                                          <p>Update your profile details</p>
                                    </div>

                                    <div class="profile-content">
                                          <div class="profile-avatar-section">
                                                <div class="avatar-wrapper">
                                                      <img [src]="photourl" class="profile-avatar" />
                                                      <div class="avatar-overlay" (click)="setEditMode('photo')">
                                                            <i class="fa-solid fa-camera"></i>
                                                      </div>
                                                </div>
                                                <h2 class="profile-name">{{ name }}</h2>
                                                <p class="profile-role">{{ role }}</p>
                                          </div>

                                          <div class="profile-details">
                                                <div class="detail-item">
                                                      <div class="detail-icon">
                                                            <i class="fa-solid fa-envelope"></i>
                                                      </div>
                                                      <div class="detail-content">
                                                            <label>Email Address</label>
                                                            <p>{{ user?.email }}</p>
                                                      </div>
                                                </div>

                                                <div class="detail-item">
                                                      <div class="detail-icon">
                                                            <i class="fa-solid fa-shield-halved"></i>
                                                      </div>
                                                      <div class="detail-content">
                                                            <label>Password</label>
                                                            <p>â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢</p>
                                                            <button class="btn-edit" (click)="setEditMode('password')">
                                                                  <i class="fa-solid fa-lock"></i>
                                                                  Change Password
                                                            </button>
                                                      </div>
                                                </div>
                                          </div>
                                    </div>
                              </div>

                              <!-- Edit Panel -->
                              <div class="edit-panel">
                                    <!-- Default View -->
                                    <div *ngIf="editMode === ''" class="placeholder-content">
                                          <div class="placeholder-icon">
                                                <i class="fa-solid fa-user-gear"></i>
                                          </div>
                                          <h4>Select an option to update your profile</h4>
                                          <p>Choose from the options on the left to edit your profile information</p>
                                    </div>

                                    <!-- Update Photo -->
                                    <div *ngIf="editMode === 'photo'" class="edit-content">
                                          <div class="form-group">
                                                <label for="profilePhoto">Upload New Photo</label>
                                                <div class="file-upload-wrapper">
                                                      <input type="file" id="profilePhoto"
                                                            (change)="onFileSelect($event)" accept="image/*"
                                                            class="file-input" />
                                                      <div class="file-upload-area">
                                                            <i class="fa-solid fa-cloud-arrow-up"></i>
                                                            <p>Drag & drop or click to upload</p>
                                                            <span>JPG, PNG up to 5MB</span>
                                                      </div>
                                                </div>
                                          </div>

                                          <div class="form-actions">
                                                <button class="btn-secondary" (click)="setEditMode('')">Cancel</button>
                                                <button class="btn-primary" (click)="updatePhoto()"
                                                      [disabled]="!selectedFile">
                                                      <span *ngIf="!submitting">Update Photo</span>
                                                      <span *ngIf="submitting" class="loading">
                                                            <i class="fa-solid fa-spinner"></i> Updating...
                                                      </span>
                                                </button>
                                          </div>

                                          <div class="form-messages">
                                                <p class="success" *ngIf="successMsg">{{ successMsg }}</p>
                                                <p class="error" *ngIf="errorMsg">{{ errorMsg }}</p>
                                          </div>
                                    </div>

                                    <!-- Change Password -->
                                    <div *ngIf="editMode === 'password'" class="edit-content">
                                          <div class="form-group">
                                                <label for="currentPassword">Current Password</label>
                                                <div class="input-wrapper">
                                                      <input id="currentPassword" type="password"
                                                            [(ngModel)]="currentPass"
                                                            placeholder="Enter current password" />
                                                      <div class="input-icon">
                                                            <i class="fa-solid fa-lock"></i>
                                                      </div>
                                                </div>
                                          </div>

                                          <div class="form-group">
                                                <label for="newPassword">New Password</label>
                                                <div class="input-wrapper">
                                                      <input id="newPassword" type="password" [(ngModel)]="newPass"
                                                            placeholder="Enter new password" />
                                                      <div class="input-icon">
                                                            <i class="fa-solid fa-lock"></i>
                                                      </div>
                                                </div>
                                          </div>

                                          <div class="form-group">
                                                <label for="confirmPassword">Confirm New Password</label>
                                                <div class="input-wrapper">
                                                      <input id="confirmPassword" type="password"
                                                            [(ngModel)]="confirmPass"
                                                            placeholder="Confirm new password" />
                                                      <div class="input-icon">
                                                            <i class="fa-solid fa-lock"></i>
                                                      </div>
                                                </div>
                                          </div>

                                          <div class="form-actions">
                                                <button class="btn-secondary" (click)="setEditMode('')">Cancel</button>
                                                <button class="btn-primary" (click)="updatePassword()">
                                                      Change Password
                                                </button>
                                          </div>

                                          <div class="form-messages">
                                                <p class="success" *ngIf="successMsg">{{ successMsg }}</p>
                                                <p class="error" *ngIf="errorMsg">{{ errorMsg }}</p>
                                          </div>
                                    </div>
                              </div>
                        </div>
                  </section>
            </div>
      </main>
</div>
<!-- TOAST CONTAINER -->
<div class="toast-container">
      <div *ngFor="let toast of toasts" class="toast" [ngClass]="toast.type" (click)="removeToast(toast.id)">
            {{ toast.message }}
      </div>
</div>